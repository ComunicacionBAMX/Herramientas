<!DOCTYPE HTML>
<html lang="es">
	<head>
		<title>Herramientas - BAMX</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<link rel="icon" type="image/png" href="logoico.png"> 
        <style>
            /* Tu estilo original se mantiene intacto */
            #bg { background-image: url("fondo2.png") !important; background-size: cover !important; background-position: center !important; background-attachment: fixed !important; z-index: -1 !important; }
            #bg:before, #bg:after { background-image: none !important; background: rgba(0, 0, 0, 0.4) !important; content: '' !important; display: block !important; }
            #top-nav { position: fixed; top: 0; left: 0; width: 100%; height: 100px; background: rgba(0, 0, 0, 0.95); border-bottom: 2px solid #ff0000; display: flex; justify-content: space-between; align-items: center; padding: 0 2rem; z-index: 10001; }
            .nav-logo { height: 70px; width: auto; object-fit: contain; }
            .tools-container { display: flex; justify-content: center; gap: 2rem; width: 100%; max-width: 900px; margin: 2rem auto; flex-wrap: wrap; }
            .tool-card { flex: 1; min-width: 300px; background: rgba(255, 255, 255, 0.05); border: 1px solid #ff0000; padding: 2.5rem; text-align: center; transition: all 0.3s ease; text-decoration: none !important; }
            .tool-card:hover { transform: translateY(-10px); background: rgba(255, 0, 0, 0.1); box-shadow: 0 10px 20px rgba(0,0,0,0.5); }
            .tool-card .icon { font-size: 3.5rem; color: #ff0000; margin-bottom: 1.5rem; display: block; }
            .tool-card h3 { margin-bottom: 1rem; letter-spacing: 2px; color: #ffffff; }
            #wrapper { padding-top: 150px; display: flex; flex-direction: column; align-items: center; }
            .back-link { margin-top: 3rem; color: #ffffff; text-decoration: none; font-size: 0.8rem; letter-spacing: 2px; border-bottom: 1px solid #ff0000; }

            /* Estilos de la burbuja de chat */
            #chat-bubble { position: fixed; bottom: 20px; right: 20px; width: 60px; height: 60px; background: #ff0000; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.5); z-index: 10002; transition: transform 0.3s; }
            #chat-window-container { display: none; position: fixed; bottom: 90px; right: 20px; width: 350px; height: 450px; background: #1c2331; border: 1px solid #ff0000; border-radius: 12px; flex-direction: column; z-index: 10002; box-shadow: 0 10px 30px rgba(0,0,0,0.6); overflow: hidden; }
        </style>
	</head>
	<body class="is-preload">
        <nav id="top-nav">
            <img src="LOGOS/3.png" alt="BAMX Puebla" class="nav-logo" />
            <div style="color: white; font-weight: bold; letter-spacing: 3px; font-size: 1.2rem;">UTILIDADES</div>
            <img src="LOGOS/5.png" alt="BAMX Tlaxcala" class="nav-logo" />
        </nav>

		<div id="bg"></div>

		<div id="wrapper">
				<header id="header" style="border:none; background:none;">
						<div class="content">
							<div class="inner">
								<h1>RECURSOS DIGITALES</h1>
                                <p>Herramientas de gesti√≥n y diagn√≥stico para colaboradores de BAMX</p>
							</div>
						</div>
				</header> 

				<div class="tools-container">
                    <a href="https://comunicacionbamx.github.io/GENERATUQR/" target="_blank" class="tool-card">
                        <span class="icon fa-qrcode"></span>
                        <h3>Genera tu propio QR</h3>
                        <p>Convierte tus enlaces y contactos en c√≥digos QR listos para imprimir o compartir.</p>
                    </a>
                    <a href="https://comunicacionbamx.github.io/Analizador/" target="_blank" class="tool-card">
                        <span class="icon fa-laptop"></span>
                        <h3>Analizador de mi Equipo</h3>
                        <p>Obt√©n un reporte t√©cnico detallado de los componentes y sistema de tu estaci√≥n de trabajo.</p>
                    </a>
				</div>

                <a href="index.html" class="back-link">‚Üê VOLVER AL INICIO</a>

                <footer id="footer">
						<p class="copyright">&copy; BAMX. <a href="https://www.bapuebla.org.mx/" target="_blank">PUEBLA & TLAXCALA</a>.</p>
				</footer>	
		</div> 

        <div id="chat-bubble" onclick="toggleChat()"> <span style="color: white; font-size: 30px;">üí¨</span> </div>
        <div id="chat-window-container">
            <div style="background: #000; padding: 15px; color: white; font-weight: bold; border-bottom: 1px solid #ff0000; display: flex; justify-content: space-between;">
                <span>ü§ñ Soporte IA BAMX</span> <span onclick="toggleChat()" style="cursor:pointer;">‚úñ</span>
            </div>
            <div id="chat-messages" style="flex: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; background: rgba(0,0,0,0.2); color: #cfd8dc; font-size: 0.9rem;">
                <div style="background: #334155; padding: 10px; border-radius: 8px; align-self: flex-start; border-left: 3px solid #ff0000;">Hola, soy tu asistente t√©cnico de BAMX. ¬øEn qu√© puedo ayudarte?</div>
            </div>
            <div style="padding: 10px; background: #000; display: flex; gap: 5px;">
                <input type="text" id="chat-input" placeholder="Escribe aqu√≠..." style="flex: 1; background: #1c2331; border: 1px solid #333; color: white; padding: 8px; border-radius: 4px;">
                <button onclick="sendChatMessage()" style="background: #ff0000; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">></button>
            </div>
        </div>

		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>

        <script>
            function toggleChat() {
                const chat = document.getElementById('chat-window-container');
                chat.style.display = (chat.style.display === 'none' || chat.style.display === '') ? 'flex' : 'none';
            }

           async function sendChatMessage() {
    const input = document.getElementById('chat-input');
    const msgContainer = document.getElementById('chat-messages');
    if (!input.value) return;

    // Token y configuraci√≥n
    const HF_TOKEN = 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; 
    const MODEL_URL = "https://api-inference.huggingface.co/models/MistralAI/Mistral-7B-Instruct-v0.2";

    const userText = input.value;
    msgContainer.innerHTML += `<div style="background: #ff0000; color: white; padding: 10px; border-radius: 8px; align-self: flex-end;">${userText}</div>`;
    input.value = '';
    msgContainer.scrollTop = msgContainer.scrollHeight;

    const loadingId = 'loading-' + Date.now();
    msgContainer.innerHTML += `<div id="${loadingId}" style="font-style: italic; font-size: 0.8rem; color: #8899a6;">La IA est√° despertando... espera 10s...</div>`;

    try {
        const response = await fetch(MODEL_URL, {
            method: "POST",
            headers: { 
                "Content-Type": "application/json",
                "Authorization": `Bearer ${HF_TOKEN}` // Esto es lo que falta para que responda
            },
            body: JSON.stringify({
                inputs: `[INST] Eres el soporte t√©cnico de BAMX. Responde breve y solo sobre tecnolog√≠a. Pregunta: ${userText} [/INST]`,
                options: { wait_for_model: true } // Obliga al servidor a no dar error si la IA est√° cargando
            })
        });

        const data = await response.json();
        const loadingElement = document.getElementById(loadingId);
        if (loadingElement) loadingElement.remove();

        let reply = data[0]?.generated_text || "El servidor est√° ocupado, intenta en un momento.";
        if (reply.includes('[/INST]')) reply = reply.split('[/INST]').pop().trim();

        msgContainer.innerHTML += `<div style="background: #334155; padding: 10px; border-radius: 8px; align-self: flex-start; border-left: 3px solid #ff0000;">${reply}</div>`;
    } catch (e) {
        document.getElementById(loadingId).innerText = "Error cr√≠tico de conexi√≥n.";
    }
    msgContainer.scrollTop = msgContainer.scrollHeight;
}
        </script>
	</body>
</html>

